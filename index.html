<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3í•™ë…„ 2ë°˜</title>
    <!-- Google Fonts: Nanum Gothic (ë‘¥ê¸€ê³  ê·€ì—¬ìš´ í•œê¸€ í°íŠ¸) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap" rel="stylesheet" />
    <style>
      /* ===========================
         ì „ì—­ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” ë° ê¸°ë³¸ê°’
         =========================== */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        /* íŒŒìŠ¤í…” ë¼ë²¤ë”/í•‘í¬ ê³„ì—´ í”„ë¼ì´ë¨¸ë¦¬ ìƒ‰ìƒ */
        --color-primary: #b48de8;
        --color-primary-hover: #9b6fd4;
        --color-primary-light: #f5eeff;
        /* ë¶€ë“œëŸ¬ìš´ íŒŒìŠ¤í…” ìœ„í—˜(danger) ìƒ‰ìƒ */
        --color-danger: #f08080;
        --color-danger-hover: #e06060;
        /* íŒŒìŠ¤í…” ë¯¼íŠ¸ ì„±ê³µ(success) ìƒ‰ìƒ */
        --color-success: #6dcfb0;
        --color-success-light: #edfaf5;
        /* íŒŒìŠ¤í…” ë…¸ë€ ê²½ê³ (warning) ìƒ‰ìƒ */
        --color-warning: #f5c76a;
        --color-warning-light: #fffbee;
        /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ (ë‹¤ì†Œ ë¶€ë“œëŸ½ê²Œ) */
        --color-text-primary: #3d3250;
        --color-text-secondary: #8878a8;
        --color-text-muted: #bbadd4;
        /* í…Œë‘ë¦¬ & ë°°ê²½ */
        --color-border: #e8d9f8;
        --color-bg: #fdf7ff;
        --color-surface: #ffffff;
        /* ì€ì€í•˜ê³  ë¶€ë“œëŸ¬ìš´ ê·¸ë¦¼ì */
        --shadow-sm: 0 2px 8px rgba(180, 141, 232, 0.12);
        --shadow-md: 0 6px 20px rgba(180, 141, 232, 0.18);
        --shadow-lg: 0 12px 36px rgba(180, 141, 232, 0.22);
        /* ë” ë‘¥ê·¼ ëª¨ì„œë¦¬ */
        --radius-sm: 14px;
        --radius-md: 20px;
        --radius-lg: 28px;
        --transition: 0.2s ease;
      }

      body {
        /* Nanum Gothic ìš°ì„  ì ìš©, ë¯¸ì§€ì› ì‹œ í´ë°± */
        font-family: 'Nanum Gothic', 'Apple SD Gothic Neo', 'ë§‘ì€ ê³ ë”•', sans-serif;
        background: var(--color-bg);
        /* ì—°í•œ ë¼ë²¤ë” ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½ */
        background-image: radial-gradient(ellipse at top left, #f0e6ff 0%, #fdf7ff 50%, #e8f8f5 100%);
        background-attachment: fixed;
        color: var(--color-text-primary);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding: 48px 16px 80px;
        letter-spacing: 0.01em;
      }

      /* ===========================
         ë©”ì¸ ì»¨í…Œì´ë„ˆ
         =========================== */
      .app-container {
        width: 100%;
        max-width: 520px;
      }

      /* ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œëŠ” í•œì¤„í‰ ê´€ë¦¬ ë•Œë¬¸ì— ë” ë„“ê²Œ */
      .app-container.wide {
        max-width: 640px;
      }

      /* ì•± í—¤ë” ì˜ì—­ */
      .app-header {
        margin-bottom: 32px;
        text-align: center;
      }

      .app-header .header-icon {
        font-size: 2.8rem;
        margin-bottom: 12px;
        display: block;
      }

      .app-header h1 {
        font-size: 1.9rem;
        font-weight: 800;
        color: var(--color-primary);
        /* ê·€ì—¬ìš´ ëŠë‚Œì„ ìœ„í•´ ìê°„ ì‚´ì§ ë„“í˜ */
        letter-spacing: 0.04em;
      }

      .app-header p {
        margin-top: 8px;
        font-size: 0.9rem;
        color: var(--color-text-secondary);
        line-height: 1.6;
      }

      /* ===========================
         í™”ë©´ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜
         =========================== */
      .screen {
        display: none;
      }

      .screen.active {
        display: block;
        animation: fadeSlideIn 0.22s ease;
      }

      @keyframes fadeSlideIn {
        from { opacity: 0; transform: translateY(8px); }
        to   { opacity: 1; transform: translateY(0); }
      }

      /* ===========================
         ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ (ê³µí†µ)
         =========================== */
      .card {
        background: var(--color-surface);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-md);
        /* íŒŒìŠ¤í…” ë¼ë²¤ë” í…Œë‘ë¦¬ë¡œ ê·€ì—¬ìš´ ìœ¤ê³½ì„  */
        border: 1.5px solid var(--color-border);
        overflow: hidden;
      }

      .card + .card {
        margin-top: 16px;
      }

      .card-header {
        padding: 20px 24px 16px;
        border-bottom: 1.5px solid var(--color-border);
        /* ë¼ë²¤ë” ê·¸ë¼ë””ì–¸íŠ¸ ì¹´ë“œ í—¤ë” */
        background: linear-gradient(135deg, #f5eeff 0%, #fce8f8 100%);
      }

      .card-header h2 {
        font-size: 1.05rem;
        font-weight: 700;
        color: var(--color-primary);
      }

      .card-header p {
        margin-top: 4px;
        font-size: 0.83rem;
        color: var(--color-text-secondary);
        line-height: 1.5;
      }

      .card-body {
        padding: 24px;
      }

      /* ===========================
         í¼ ìš”ì†Œ (ê³µí†µ)
         =========================== */
      .form-group {
        margin-bottom: 16px;
      }

      .form-label {
        display: block;
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--color-text-secondary);
        margin-bottom: 8px;
      }

      .form-input,
      .form-select,
      .form-textarea {
        width: 100%;
        border: 2px solid var(--color-border);
        /* ì…ë ¥ì°½ë„ ë‘¥ê¸€ê²Œ */
        border-radius: var(--radius-sm);
        padding: 13px 16px;
        font-size: 1rem;
        color: var(--color-text-primary);
        outline: none;
        transition: border-color var(--transition), box-shadow var(--transition);
        background: #fdf7ff;
        font-family: inherit;
        letter-spacing: 0.02em;
        appearance: none;
        -webkit-appearance: none;
      }

      .form-input::placeholder,
      .form-textarea::placeholder {
        color: var(--color-text-muted);
      }

      .form-input:focus,
      .form-select:focus,
      .form-textarea:focus {
        border-color: var(--color-primary);
        /* ë¼ë²¤ë” í¬ì»¤ìŠ¤ ê¸€ë¡œìš° */
        box-shadow: 0 0 0 4px rgba(180, 141, 232, 0.22);
        background: var(--color-surface);
      }

      /* í…ìŠ¤íŠ¸ì˜ì—­ ì „ìš© */
      .form-textarea {
        resize: vertical;
        min-height: 80px;
        line-height: 1.6;
      }

      /* ë“œë¡­ë‹¤ìš´ í™”ì‚´í‘œ ì»¤ìŠ¤í…€ */
      .form-select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 14px center;
        padding-right: 44px;
        cursor: pointer;
      }

      /* ë“œë¡­ë‹¤ìš´ í–‰ ë ˆì´ì•„ì›ƒ (í•™ë…„ + ë°˜ ë‚˜ë€íˆ) */
      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin-bottom: 16px;
      }

      .form-row .form-group {
        margin-bottom: 0;
      }

      /* ===========================
         ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸ (ê³µí†µ)
         =========================== */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        border: none;
        /* ë²„íŠ¼ì„ pillí˜•ìœ¼ë¡œ (ë§¤ìš° ë‘¥ê¸€ê²Œ) */
        border-radius: 999px;
        padding: 13px 24px;
        font-size: 0.97rem;
        font-weight: 700;
        cursor: pointer;
        transition: background var(--transition), transform 0.15s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow var(--transition);
        font-family: inherit;
        white-space: nowrap;
        letter-spacing: 0.03em;
      }

      /* í˜¸ë²„ ì‹œ ì‚´ì§ ìœ„ë¡œ íŠ€ì–´ì˜¤ë¥´ëŠ” íš¨ê³¼ */
      .btn:hover {
        transform: translateY(-2px) scale(1.03);
      }

      .btn:active {
        transform: scale(0.96);
      }

      .btn--full {
        width: 100%;
      }

      /* ê¸°ë³¸(primary) ë²„íŠ¼ â€” íŒŒìŠ¤í…” ë¼ë²¤ë” ê·¸ë¼ë””ì–¸íŠ¸ */
      .btn--primary {
        background: linear-gradient(135deg, #c9a6f0 0%, #b48de8 100%);
        color: #fff;
        box-shadow: 0 4px 14px rgba(180, 141, 232, 0.35);
      }

      .btn--primary:hover {
        background: linear-gradient(135deg, #b48de8 0%, #9b6fd4 100%);
        box-shadow: 0 6px 20px rgba(180, 141, 232, 0.45);
      }

      /* ë³´ì¡°(secondary) ë²„íŠ¼ â€” íŒŒìŠ¤í…” í…Œë‘ë¦¬ */
      .btn--secondary {
        background: var(--color-surface);
        color: var(--color-primary);
        border: 2px solid var(--color-primary);
      }

      .btn--secondary:hover {
        background: var(--color-primary-light);
      }

      /* ìœ„í—˜(danger) ë²„íŠ¼ â€” ë¶€ë“œëŸ¬ìš´ íŒŒìŠ¤í…” ë ˆë“œ */
      .btn--danger {
        background: none;
        color: var(--color-danger);
        border: 2px solid var(--color-danger);
      }

      .btn--danger:hover {
        /* ì—°í•œ íŒŒìŠ¤í…” í•‘í¬ í˜¸ë²„ */
        background: #fde8e8;
      }

      /* ê³ ìŠ¤íŠ¸(ghost) ë²„íŠ¼ â€” í…ìŠ¤íŠ¸ë§Œ */
      .btn--ghost {
        background: none;
        color: var(--color-text-secondary);
        padding: 8px 16px;
        font-size: 0.88rem;
        border-radius: 999px;
      }

      .btn--ghost:hover {
        color: var(--color-primary);
        background: var(--color-primary-light);
      }

      /* ì„±ê³µ(success) ë²„íŠ¼ â€” íŒŒìŠ¤í…” ë¯¼íŠ¸ */
      .btn--success {
        background: linear-gradient(135deg, #84dbbe 0%, #6dcfb0 100%);
        color: #fff;
        box-shadow: 0 4px 14px rgba(109, 207, 176, 0.35);
      }

      .btn--success:hover {
        background: linear-gradient(135deg, #6dcfb0 0%, #52bfa0 100%);
        box-shadow: 0 6px 20px rgba(109, 207, 176, 0.45);
      }

      /* í…ìŠ¤íŠ¸ ë§í¬ ë²„íŠ¼ */
      .btn--link {
        background: none;
        border: none;
        color: var(--color-primary);
        font-size: 0.88rem;
        font-weight: 600;
        padding: 4px 0;
        cursor: pointer;
        text-decoration: underline;
        font-family: inherit;
      }

      .btn--link:hover {
        color: var(--color-primary-hover);
      }

      /* ì‘ì€ ë²„íŠ¼ */
      .btn--sm {
        padding: 8px 14px;
        font-size: 0.83rem;
      }

      /* ===========================
         ì•Œë¦¼ ë©”ì‹œì§€ ë°•ìŠ¤
         =========================== */
      .alert {
        display: flex;
        align-items: flex-start;
        gap: 10px;
        padding: 12px 16px;
        border-radius: var(--radius-sm);
        font-size: 0.88rem;
        line-height: 1.5;
        margin-bottom: 16px;
        animation: fadeSlideIn 0.18s ease;
      }

      .alert--error {
        /* íŒŒìŠ¤í…” í•‘í¬ ì—ëŸ¬ */
        background: #fdeaea;
        color: #c05050;
        border: 1px solid #f5b0b0;
        border-radius: var(--radius-sm);
      }

      .alert--success {
        /* íŒŒìŠ¤í…” ë¯¼íŠ¸ ì„±ê³µ */
        background: var(--color-success-light);
        color: #2e8a6e;
        border: 1px solid #a8e8d4;
        border-radius: var(--radius-sm);
      }

      .alert--warning {
        /* íŒŒìŠ¤í…” ë…¸ë‘ ê²½ê³  */
        background: var(--color-warning-light);
        color: #9a6a00;
        border: 1px solid #f5d88a;
        border-radius: var(--radius-sm);
      }

      .alert--info {
        background: var(--color-primary-light);
        color: var(--color-primary);
        border: 1px solid #dcc8f5;
        border-radius: var(--radius-sm);
      }

      .alert-icon {
        font-size: 1rem;
        flex-shrink: 0;
        margin-top: 1px;
      }

      /* ===========================
         ë©”ì¸ í™”ë©´ â€” ì—­í•  ì„ íƒ
         =========================== */
      .role-select-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 12px;
        margin-top: 8px;
      }

      .role-card {
        background: var(--color-surface);
        border-radius: var(--radius-md);
        padding: 24px 12px;
        text-align: center;
        border: 2px solid var(--color-border);
        cursor: pointer;
        transition:
          border-color var(--transition),
          box-shadow var(--transition),
          background var(--transition),
          /* íŠ€ëŠ” ìŠ¤í”„ë§ íš¨ê³¼ */
          transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        box-shadow: var(--shadow-sm);
      }

      .role-card:hover {
        border-color: var(--color-primary);
        box-shadow: var(--shadow-md);
        background: linear-gradient(135deg, #f5eeff 0%, #fce8f8 100%);
        transform: translateY(-4px) scale(1.03);
      }

      .role-card:active {
        transform: translateY(0) scale(0.97);
      }

      .role-card-icon {
        font-size: 2.2rem;
        margin-bottom: 10px;
        display: block;
      }

      .role-card-title {
        font-size: 0.95rem;
        font-weight: 700;
        color: var(--color-text-primary);
        margin-bottom: 5px;
      }

      .role-card-desc {
        font-size: 0.74rem;
        color: var(--color-text-secondary);
        line-height: 1.5;
      }

      /* ===========================
         ì‚¬ìš©ì í™ˆ í™”ë©´ â€” í”„ë¡œí•„ ì¹´ë“œ
         =========================== */
      .profile-icon-wrap {
        width: 96px;
        height: 96px;
        /* íŒŒìŠ¤í…” ë¼ë²¤ë”â†’í•‘í¬ ê·¸ë¼ë””ì–¸íŠ¸ ì•„ì´ì½˜ ë°°ê²½ */
        background: linear-gradient(135deg, #f0e0ff 0%, #fce8f8 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 2.6rem;
        border: 3px solid #dcc8f5;
        box-shadow: 0 6px 18px rgba(180, 141, 232, 0.22);
        animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      @keyframes popIn {
        from { opacity: 0; transform: scale(0.5); }
        to   { opacity: 1; transform: scale(1); }
      }

      .welcome-title {
        font-size: 1.4rem;
        font-weight: 800;
        color: var(--color-primary);
        text-align: center;
        margin-bottom: 6px;
      }

      .welcome-subtitle {
        font-size: 0.9rem;
        color: var(--color-text-secondary);
        text-align: center;
        margin-bottom: 24px;
      }

      /* ì‚¬ìš©ì ì •ë³´ í…Œì´ë¸” (í™ˆ í™”ë©´) */
      .info-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 24px;
        border-radius: var(--radius-sm);
        overflow: hidden;
        border: 1px solid var(--color-border);
      }

      .info-table th,
      .info-table td {
        padding: 12px 16px;
        font-size: 0.92rem;
        text-align: left;
        border-bottom: 1px solid var(--color-border);
      }

      .info-table tr:last-child th,
      .info-table tr:last-child td {
        border-bottom: none;
      }

      .info-table th {
        font-weight: 700;
        color: var(--color-text-secondary);
        /* íŒŒìŠ¤í…” ë¼ë²¤ë” í…Œì´ë¸” í—¤ë” */
        background: #f5eeff;
        width: 35%;
      }

      .info-table td {
        color: var(--color-text-primary);
        font-weight: 600;
      }

      /* ===========================
         í•œì¤„í‰ ì‘ì„± ì„¹ì…˜ (ì‚¬ìš©ì í™ˆ)
         =========================== */
      .review-write-section {
        margin-bottom: 0;
      }

      /* ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ ë±ƒì§€ â€” íŒŒìŠ¤í…” pill ìŠ¤íƒ€ì¼ */
      .today-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: linear-gradient(135deg, #f0e0ff 0%, #fce8f8 100%);
        color: var(--color-primary);
        font-size: 0.8rem;
        font-weight: 700;
        padding: 6px 16px;
        border-radius: 999px;
        margin-bottom: 12px;
        border: 1.5px solid #dcc8f5;
        box-shadow: 0 2px 8px rgba(180, 141, 232, 0.15);
      }

      /* í•œì¤„í‰ ì…ë ¥ ì˜ì—­ + ë²„íŠ¼ ë¬¶ìŒ */
      .review-input-wrap {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .review-char-count {
        font-size: 0.78rem;
        color: var(--color-text-muted);
        text-align: right;
        margin-top: -6px;
      }

      .review-char-count.near-limit {
        color: var(--color-warning);
      }

      .review-char-count.at-limit {
        color: var(--color-danger);
      }

      /* ===========================
         ë‚´ í•œì¤„í‰ ëª©ë¡ (ì‚¬ìš©ì í™ˆ)
         =========================== */
      .review-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      /* ê°œë³„ í•œì¤„í‰ ì•„ì´í…œ */
      .review-item {
        border: 1.5px solid var(--color-border);
        border-radius: var(--radius-md);
        overflow: hidden;
        transition: box-shadow var(--transition), transform var(--transition);
      }

      .review-item:hover {
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
      }

      .review-item-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 14px;
        /* íŒŒìŠ¤í…” ë¼ë²¤ë” í—¤ë” */
        background: linear-gradient(135deg, #f5eeff 0%, #fce8f8 100%);
        border-bottom: 1.5px solid var(--color-border);
      }

      .review-item-date {
        font-size: 0.8rem;
        font-weight: 700;
        color: var(--color-text-secondary);
      }

      /* ì˜¤ëŠ˜ ë‚ ì§œ ê°•ì¡° */
      .review-item-date.is-today {
        color: var(--color-primary);
      }

      .review-item-body {
        padding: 12px 14px;
      }

      .review-item-content {
        font-size: 0.95rem;
        color: var(--color-text-primary);
        line-height: 1.7;
        word-break: break-all;
      }

      /* ê´€ë¦¬ì í‰ê°€ ì½”ë©˜íŠ¸ í‘œì‹œ ì˜ì—­ â€” íŒŒìŠ¤í…” ë…¸ë‘ */
      .admin-comment-box {
        margin-top: 10px;
        padding: 10px 14px;
        background: #fffbee;
        border-radius: var(--radius-sm);
        border-left: 4px solid #f5c76a;
        display: flex;
        align-items: flex-start;
        gap: 8px;
      }

      .admin-comment-label {
        font-size: 0.75rem;
        font-weight: 700;
        color: #a07800;
        flex-shrink: 0;
        margin-top: 2px;
      }

      .admin-comment-text {
        font-size: 0.88rem;
        color: #7a5a00;
        line-height: 1.6;
        word-break: break-all;
      }

      /* í•œì¤„í‰ ì—†ìŒ ì•ˆë‚´ */
      .review-list-empty {
        text-align: center;
        padding: 28px 16px;
        color: var(--color-text-muted);
        font-size: 0.88rem;
        line-height: 1.8;
      }

      .review-list-empty-icon {
        font-size: 1.8rem;
        display: block;
        margin-bottom: 8px;
      }

      /* ===========================
         ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ â€” ì‚¬ìš©ì ëª©ë¡ í…Œì´ë¸”
         =========================== */
      .section-title {
        font-size: 0.9rem;
        font-weight: 700;
        color: var(--color-text-secondary);
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .user-count-badge {
        /* íŒŒìŠ¤í…” ë¼ë²¤ë” ë°°ì§€ */
        background: linear-gradient(135deg, #c9a6f0 0%, #b48de8 100%);
        color: #fff;
        font-size: 0.75rem;
        font-weight: 700;
        padding: 3px 12px;
        border-radius: 999px;
        letter-spacing: 0.03em;
        box-shadow: 0 2px 8px rgba(180, 141, 232, 0.3);
      }

      .user-list-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.88rem;
        border-radius: var(--radius-sm);
        overflow: hidden;
        border: 1px solid var(--color-border);
      }

      .user-list-table thead tr {
        /* íŒŒìŠ¤í…” ê·¸ë¼ë””ì–¸íŠ¸ í…Œì´ë¸” í—¤ë” */
        background: linear-gradient(135deg, #f5eeff 0%, #fce8f8 100%);
      }

      .user-list-table th {
        padding: 10px 14px;
        font-weight: 700;
        color: var(--color-primary);
        text-align: left;
        border-bottom: 2px solid #dcc8f5;
        white-space: nowrap;
      }

      .user-list-table td {
        padding: 10px 14px;
        color: var(--color-text-primary);
        border-bottom: 1px solid var(--color-border);
      }

      .user-list-table tbody tr:last-child td {
        border-bottom: none;
      }

      .user-list-table tbody tr:hover {
        /* í˜¸ë²„ ì‹œ ì—°í•œ íŒŒìŠ¤í…” */
        background: #f9f2ff;
      }

      /* ì‚¬ìš©ì ì—†ìŒ ì•ˆë‚´ */
      .user-list-empty {
        text-align: center;
        padding: 32px 16px;
        color: var(--color-text-muted);
        font-size: 0.88rem;
        line-height: 1.8;
      }

      .user-list-empty-icon {
        font-size: 2rem;
        display: block;
        margin-bottom: 8px;
      }

      /* ===========================
         ê´€ë¦¬ì í•œì¤„í‰ ê´€ë¦¬ ì„¹ì…˜
         =========================== */

      /* ë‚ ì§œ ì„ íƒ í–‰ */
      .date-filter-row {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 16px;
      }

      .date-filter-row .form-input {
        flex: 1;
        padding: 10px 14px;
        font-size: 0.9rem;
      }

      /* ê´€ë¦¬ììš© í•œì¤„í‰ ëª©ë¡ */
      .admin-review-list {
        display: flex;
        flex-direction: column;
        gap: 14px;
      }

      /* ê´€ë¦¬ììš© í•œì¤„í‰ ì•„ì´í…œ */
      .admin-review-item {
        border: 1.5px solid var(--color-border);
        border-radius: var(--radius-md);
        overflow: hidden;
        transition: box-shadow var(--transition);
      }

      .admin-review-item:hover {
        box-shadow: var(--shadow-sm);
      }

      .admin-review-item-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        /* íŒŒìŠ¤í…” ê·¸ë¼ë””ì–¸íŠ¸ í—¤ë” */
        background: linear-gradient(135deg, #f5eeff 0%, #fce8f8 100%);
        border-bottom: 1.5px solid var(--color-border);
      }

      .admin-review-user-badge {
        /* íŒŒìŠ¤í…” ë¼ë²¤ë” ì‚¬ìš©ì ë°°ì§€ */
        background: linear-gradient(135deg, #c9a6f0 0%, #b48de8 100%);
        color: #fff;
        font-size: 0.75rem;
        font-weight: 700;
        padding: 4px 12px;
        border-radius: 999px;
        white-space: nowrap;
        box-shadow: 0 2px 6px rgba(180, 141, 232, 0.3);
      }

      .admin-review-item-body {
        padding: 12px 14px;
      }

      .admin-review-content {
        font-size: 0.95rem;
        color: var(--color-text-primary);
        line-height: 1.7;
        margin-bottom: 12px;
        word-break: break-all;
      }

      /* ê´€ë¦¬ì í‰ê°€ ì…ë ¥ í–‰ */
      .admin-comment-input-row {
        display: flex;
        gap: 8px;
        align-items: flex-start;
      }

      .admin-comment-input-row .form-input {
        flex: 1;
        padding: 9px 12px;
        font-size: 0.88rem;
      }

      /* ì´ë¯¸ í‰ê°€ê°€ ìˆëŠ” ê²½ìš° í‘œì‹œ ì˜ì—­ â€” íŒŒìŠ¤í…” ë¯¼íŠ¸ */
      .existing-comment-box {
        margin-bottom: 10px;
        padding: 9px 12px;
        background: #edfaf5;
        border-radius: var(--radius-sm);
        border-left: 4px solid #6dcfb0;
        display: flex;
        align-items: flex-start;
        gap: 8px;
      }

      .existing-comment-label {
        font-size: 0.75rem;
        font-weight: 700;
        color: #2e8a6e;
        flex-shrink: 0;
        margin-top: 2px;
      }

      .existing-comment-text {
        font-size: 0.88rem;
        color: #1e6655;
        line-height: 1.6;
        word-break: break-all;
      }

      /* í•œì¤„í‰ ì—†ìŒ ì•ˆë‚´ (ê´€ë¦¬ì) */
      .admin-review-empty {
        text-align: center;
        padding: 32px 16px;
        color: var(--color-text-muted);
        font-size: 0.88rem;
        line-height: 1.8;
      }

      .admin-review-empty-icon {
        font-size: 2rem;
        display: block;
        margin-bottom: 8px;
      }

      /* í•œì¤„í‰ ìˆ˜ ë±ƒì§€ (ê´€ë¦¬ì) â€” íŒŒìŠ¤í…” ë¯¼íŠ¸ */
      .review-count-badge {
        background: linear-gradient(135deg, #84dbbe 0%, #6dcfb0 100%);
        color: #fff;
        font-size: 0.75rem;
        font-weight: 700;
        padding: 3px 12px;
        border-radius: 999px;
        letter-spacing: 0.03em;
        box-shadow: 0 2px 8px rgba(109, 207, 176, 0.3);
      }

      /* ===========================
         ëŒ€ì‹œë³´ë“œ ìƒë‹¨ í—¤ë” (ê´€ë¦¬ììš©)
         =========================== */
      .dashboard-topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
        padding: 0 4px;
      }

      .dashboard-topbar h2 {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--color-text-primary);
      }

      .dashboard-topbar .admin-badge {
        /* ê´€ë¦¬ì ë°°ì§€ â€” íŒŒìŠ¤í…” ë¼ë²¤ë” ê·¸ë¼ë””ì–¸íŠ¸ */
        background: linear-gradient(135deg, #c9a6f0 0%, #b48de8 100%);
        color: #fff;
        font-size: 0.72rem;
        font-weight: 700;
        padding: 4px 14px;
        border-radius: 999px;
        letter-spacing: 0.04em;
        box-shadow: 0 2px 8px rgba(180, 141, 232, 0.3);
      }

      /* ===========================
         êµ¬ë¶„ì„ 
         =========================== */
      .divider {
        border: none;
        border-top: 1px solid var(--color-border);
        margin: 20px 0;
      }

      /* ===========================
         ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ ì˜ì—­
         =========================== */
      .back-bar {
        margin-bottom: 16px;
      }

      /* ===========================
         í¼ í•˜ë‹¨ ë§í¬ ì˜ì—­
         =========================== */
      .form-footer {
        text-align: center;
        margin-top: 16px;
        font-size: 0.88rem;
        color: var(--color-text-secondary);
      }

      .form-footer .btn--link {
        margin-left: 6px;
      }

      /* ===========================
         ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ (ëª¨ë°”ì¼)
         =========================== */
      @media (max-width: 480px) {
        body {
          padding: 28px 12px 60px;
        }

        .app-header h1 {
          font-size: 1.6rem;
        }

        .role-select-grid {
          grid-template-columns: 1fr;
          gap: 10px;
        }

        .role-card {
          display: flex;
          align-items: center;
          gap: 16px;
          padding: 16px 18px;
          text-align: left;
        }

        .role-card-icon {
          font-size: 2rem;
          margin-bottom: 0;
          flex-shrink: 0;
        }

        .card-body {
          padding: 18px;
        }

        .form-row {
          grid-template-columns: 1fr 1fr;
        }

        .user-list-table th,
        .user-list-table td {
          padding: 8px 10px;
        }

        .admin-comment-input-row {
          flex-direction: column;
        }

        .date-filter-row {
          flex-direction: column;
          align-items: stretch;
        }
      }

      /* ===========================
         ì…ë ¥ì°½ í”ë“¤ë¦¼ ì• ë‹ˆë©”ì´ì…˜
         =========================== */
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        20%       { transform: translateX(-6px); }
        40%       { transform: translateX(6px); }
        60%       { transform: translateX(-4px); }
        80%       { transform: translateX(4px); }
      }

      .input-error-shake {
        animation: shake 0.35s ease;
        /* íŒŒìŠ¤í…” ë ˆë“œ ì—ëŸ¬ í…Œë‘ë¦¬ */
        border-color: #f08080 !important;
      }
    </style>
  </head>
  <body>
    <div class="app-container" id="appContainer">

      <!-- ì•± ê³µí†µ í—¤ë” -->
      <header class="app-header">
        <span class="header-icon">ğŸŒ¸</span>
        <h1>ìš°ë¦¬ ë°˜ í™ˆí˜ì´ì§€ âœ¨</h1>
        <p>íšŒì›ê°€ì… í›„ ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•˜ì„¸ìš”.</p>
      </header>

      <!-- ==============================
           í™”ë©´ 1: ë©”ì¸ (ì—­í•  ì„ íƒ)
           ============================== -->
      <div class="screen active" id="screenMain">
        <div class="role-select-grid">
          <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ -->
          <div class="role-card" id="btnGoAdminLogin" role="button" tabindex="0" aria-label="ê´€ë¦¬ì ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™">
            <span class="role-card-icon">ğŸ€</span>
            <div class="role-card-title">ê´€ë¦¬ì ë¡œê·¸ì¸</div>
            <div class="role-card-desc">ê´€ë¦¬ì ì „ìš©<br/>ëŒ€ì‹œë³´ë“œ ì ‘ì†</div>
          </div>
          <!-- ì‚¬ìš©ì ë¡œê·¸ì¸ -->
          <div class="role-card" id="btnGoUserLogin" role="button" tabindex="0" aria-label="ì‚¬ìš©ì ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™">
            <span class="role-card-icon">ğŸ°</span>
            <div class="role-card-title">ì‚¬ìš©ì ë¡œê·¸ì¸</div>
            <div class="role-card-desc">ì´ë¦„ + ë¹„ë°€ë²ˆí˜¸ë¡œ<br/>ë¡œê·¸ì¸</div>
          </div>
          <!-- íšŒì›ê°€ì… -->
          <div class="role-card" id="btnGoRegister" role="button" tabindex="0" aria-label="íšŒì›ê°€ì…ìœ¼ë¡œ ì´ë™">
            <span class="role-card-icon">ğŸŒŸ</span>
            <div class="role-card-title">íšŒì›ê°€ì…</div>
            <div class="role-card-desc">ì •ë³´ë¥¼ ì…ë ¥í•˜ì—¬<br/>íšŒì› ë“±ë¡</div>
          </div>
        </div>
      </div>

      <!-- ==============================
           í™”ë©´ 2: íšŒì›ê°€ì…
           ============================== -->
      <div class="screen" id="screenRegister">
        <div class="back-bar">
          <button class="btn btn--ghost" id="btnBackFromRegister" type="button">
            ğŸŒ¸ ì²˜ìŒìœ¼ë¡œ
          </button>
        </div>
        <div class="card">
          <div class="card-header">
            <h2>ğŸŒŸ íšŒì›ê°€ì…</h2>
            <p>í•™ë…„, ë°˜, ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì—¬ íšŒì›ìœ¼ë¡œ ë“±ë¡í•˜ì„¸ìš”.</p>
          </div>
          <div class="card-body">
            <!-- ê°€ì… ê²°ê³¼ ë©”ì‹œì§€ (ê¸°ë³¸ ìˆ¨ê¹€) -->
            <div class="alert" id="registerAlert" style="display: none;" role="alert" aria-live="polite">
              <span class="alert-icon" id="registerAlertIcon"></span>
              <span id="registerAlertMsg"></span>
            </div>

            <!-- í•™ë…„ + ë°˜ ë“œë¡­ë‹¤ìš´ (ë‚˜ë€íˆ) -->
            <div class="form-row">
              <div class="form-group">
                <label class="form-label" for="registerGrade">í•™ë…„</label>
                <select id="registerGrade" class="form-select" aria-label="í•™ë…„ ì„ íƒ">
                  <option value="">ì„ íƒ</option>
                  <option value="1">1í•™ë…„</option>
                  <option value="2">2í•™ë…„</option>
                  <option value="3">3í•™ë…„</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label" for="registerClass">ë°˜</label>
                <select id="registerClass" class="form-select" aria-label="ë°˜ ì„ íƒ">
                  <option value="">ì„ íƒ</option>
                  <option value="1">1ë°˜</option>
                  <option value="2">2ë°˜</option>
                  <option value="3">3ë°˜</option>
                  <option value="4">4ë°˜</option>
                  <option value="5">5ë°˜</option>
                  <option value="6">6ë°˜</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="form-label" for="registerName">ì´ë¦„</label>
              <input
                type="text"
                id="registerName"
                class="form-input"
                placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                maxlength="20"
                autocomplete="name"
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="registerPassword">ë¹„ë°€ë²ˆí˜¸</label>
              <input
                type="password"
                id="registerPassword"
                class="form-input"
                placeholder="ì‚¬ìš©í•  ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                maxlength="50"
                autocomplete="new-password"
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="registerPasswordConfirm">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
              <input
                type="password"
                id="registerPasswordConfirm"
                class="form-input"
                placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
                maxlength="50"
                autocomplete="new-password"
              />
            </div>

            <button class="btn btn--primary btn--full" id="btnRegisterSubmit" type="button">
              íšŒì›ê°€ì…
            </button>

            <div class="form-footer">
              ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?
              <button class="btn--link" id="btnGoUserLoginFromRegister" type="button">ë¡œê·¸ì¸í•˜ê¸°</button>
            </div>
          </div>
        </div>
      </div>

      <!-- ==============================
           í™”ë©´ 3: ì‚¬ìš©ì ë¡œê·¸ì¸
           ============================== -->
      <div class="screen" id="screenUserLogin">
        <div class="back-bar">
          <button class="btn btn--ghost" id="btnBackFromUserLogin" type="button">
            ğŸŒ¸ ì²˜ìŒìœ¼ë¡œ
          </button>
        </div>
        <div class="card">
          <div class="card-header">
            <h2>ğŸ° ì‚¬ìš©ì ë¡œê·¸ì¸</h2>
            <p>ë“±ë¡ëœ ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì—¬ ë¡œê·¸ì¸í•˜ì„¸ìš”.</p>
          </div>
          <div class="card-body">
            <!-- ë¡œê·¸ì¸ ì—ëŸ¬ ë©”ì‹œì§€ (ê¸°ë³¸ ìˆ¨ê¹€) -->
            <div class="alert alert--error" id="userLoginAlert" style="display: none;" role="alert" aria-live="polite">
              <span class="alert-icon">âš ï¸</span>
              <span id="userLoginAlertMsg"></span>
            </div>

            <div class="form-group">
              <label class="form-label" for="userLoginName">ì´ë¦„</label>
              <input
                type="text"
                id="userLoginName"
                class="form-input"
                placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                maxlength="20"
                autocomplete="name"
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="userLoginPassword">ë¹„ë°€ë²ˆí˜¸</label>
              <input
                type="password"
                id="userLoginPassword"
                class="form-input"
                placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                maxlength="50"
                autocomplete="current-password"
              />
            </div>

            <button class="btn btn--primary btn--full" id="btnUserLoginSubmit" type="button">
              ë¡œê·¸ì¸
            </button>

            <div class="form-footer">
              ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?
              <button class="btn--link" id="btnGoRegisterFromLogin" type="button">íšŒì›ê°€ì…í•˜ê¸°</button>
            </div>
          </div>
        </div>
      </div>

      <!-- ==============================
           í™”ë©´ 4: ì‚¬ìš©ì í™ˆ
           ============================== -->
      <div class="screen" id="screenUserHome">
        <!-- í”„ë¡œí•„ ì¹´ë“œ -->
        <div class="card">
          <div class="card-body">
            <!-- í™˜ì˜ ì•„ì´ì½˜ -->
            <div class="profile-icon-wrap" aria-hidden="true">ğŸ°</div>
            <h2 class="welcome-title" id="welcomeTitle">í™˜ì˜í•©ë‹ˆë‹¤!</h2>
            <p class="welcome-subtitle" id="welcomeSubtitle">ë¡œê·¸ì¸ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤.</p>

            <!-- ì‚¬ìš©ì ì •ë³´ í…Œì´ë¸” -->
            <table class="info-table" aria-label="ë‚´ ì •ë³´">
              <tbody>
                <tr>
                  <th scope="row">í•™ë…„</th>
                  <td id="homeGrade">â€”</td>
                </tr>
                <tr>
                  <th scope="row">ë°˜</th>
                  <td id="homeClass">â€”</td>
                </tr>
                <tr>
                  <th scope="row">ì´ë¦„</th>
                  <td id="homeName">â€”</td>
                </tr>
              </tbody>
            </table>

            <button class="btn btn--danger btn--full" id="btnUserLogout" type="button">
              ë¡œê·¸ì•„ì›ƒ
            </button>
          </div>
        </div>

        <!-- ì˜¤ëŠ˜ì˜ í•œì¤„í‰ ì‘ì„± ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h2>ğŸŒˆ ì˜¤ëŠ˜ì˜ í•œì¤„í‰</h2>
            <p>ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ í•œ ì¤„ë¡œ í‘œí˜„í•´ë³´ì„¸ìš”. ë‚ ì§œê°€ ë°”ë€Œë©´ ìƒˆë¡œ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          </div>
          <div class="card-body">
            <!-- ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ -->
            <div class="today-badge" id="todayBadge">
              <span>ğŸŒ·</span>
              <span id="todayDateText">ì˜¤ëŠ˜</span>
            </div>

            <!-- ì‘ì„±/ìˆ˜ì • ê²°ê³¼ ë©”ì‹œì§€ -->
            <div class="alert" id="reviewWriteAlert" style="display: none;" role="alert" aria-live="polite">
              <span class="alert-icon" id="reviewWriteAlertIcon"></span>
              <span id="reviewWriteAlertMsg"></span>
            </div>

            <!-- í•œì¤„í‰ ì‘ì„± ì˜ì—­ -->
            <div class="review-write-section" id="reviewWriteSection">
              <div class="form-group" style="margin-bottom: 4px;">
                <textarea
                  id="reviewContentInput"
                  class="form-textarea"
                  placeholder="ì˜¤ëŠ˜ í•˜ë£¨ ì–´ë• ë‚˜ìš”? í•œ ì¤„ë¡œ ë‚¨ê²¨ë³´ì„¸ìš”."
                  maxlength="100"
                  rows="3"
                ></textarea>
              </div>
              <div class="review-char-count" id="reviewCharCount">0 / 100ì</div>
              <button class="btn btn--primary btn--full" id="btnSubmitReview" type="button" style="margin-top: 10px;">
                í•œì¤„í‰ ë“±ë¡
              </button>
            </div>
          </div>
        </div>

        <!-- ë‚´ í•œì¤„í‰ ëª©ë¡ ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h2>ğŸ“– ë‚´ í•œì¤„í‰ ëª©ë¡</h2>
            <p>ë‚´ê°€ ì‘ì„±í•œ í•œì¤„í‰ê³¼ ì„ ìƒë‹˜ì˜ í‰ê°€ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
          </div>
          <div class="card-body" style="padding: 20px 24px;">
            <!-- ëª©ë¡ (JSì—ì„œ ë™ì ìœ¼ë¡œ ì±„ì›€) -->
            <div id="myReviewListContainer"></div>
          </div>
        </div>
      </div>

      <!-- ==============================
           í™”ë©´ 5: ê´€ë¦¬ì ë¡œê·¸ì¸
           ============================== -->
      <div class="screen" id="screenAdminLogin">
        <div class="back-bar">
          <button class="btn btn--ghost" id="btnBackFromAdminLogin" type="button">
            ğŸŒ¸ ì²˜ìŒìœ¼ë¡œ
          </button>
        </div>
        <div class="card">
          <div class="card-header">
            <h2>ğŸ€ ê´€ë¦¬ì ë¡œê·¸ì¸</h2>
            <p>ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì—¬ ëŒ€ì‹œë³´ë“œì— ì ‘ì†í•˜ì„¸ìš”.</p>
          </div>
          <div class="card-body">
            <!-- ë¡œê·¸ì¸ ì—ëŸ¬ ë©”ì‹œì§€ (ê¸°ë³¸ ìˆ¨ê¹€) -->
            <div class="alert alert--error" id="adminLoginError" style="display: none;" role="alert" aria-live="polite">
              <span class="alert-icon">âš ï¸</span>
              <span id="adminLoginErrorMsg">ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</span>
            </div>

            <div class="form-group">
              <label class="form-label" for="adminPasswordInput">ë¹„ë°€ë²ˆí˜¸</label>
              <input
                type="password"
                id="adminPasswordInput"
                class="form-input"
                placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                autocomplete="current-password"
                maxlength="50"
              />
            </div>

            <button class="btn btn--primary btn--full" id="btnAdminLogin" type="button">
              ë¡œê·¸ì¸
            </button>
          </div>
        </div>
      </div>

      <!-- ==============================
           í™”ë©´ 6: ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
           ============================== -->
      <div class="screen" id="screenAdminDashboard">
        <!-- ëŒ€ì‹œë³´ë“œ ìƒë‹¨ ë°” -->
        <div class="dashboard-topbar">
          <h2>ğŸ€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>
          <span class="admin-badge">ê´€ë¦¬ì</span>
        </div>

        <!-- ê°€ì… ì‚¬ìš©ì ëª©ë¡ ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h2>ğŸ¥ ê°€ì… ì‚¬ìš©ì ëª©ë¡</h2>
            <p>í˜„ì¬ ì‹œìŠ¤í…œì— ë“±ë¡ëœ ëª¨ë“  ì‚¬ìš©ì ëª©ë¡ì…ë‹ˆë‹¤. í•™ë…„ Â· ë°˜ ìˆœìœ¼ë¡œ ì •ë ¬ë©ë‹ˆë‹¤.</p>
          </div>
          <div class="card-body" style="padding: 20px 24px;">
            <div class="section-title">
              <span>ë“±ë¡ ì‚¬ìš©ì</span>
              <span class="user-count-badge" id="userCountBadge">0ëª…</span>
            </div>
            <!-- ì‚¬ìš©ì ëª©ë¡ í…Œì´ë¸” (JSì—ì„œ ë™ì ìœ¼ë¡œ ì±„ì›€) -->
            <div id="userListContainer"></div>
          </div>
        </div>

        <!-- í•œì¤„í‰ ê´€ë¦¬ ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h2>ğŸ“ í•œì¤„í‰ ê´€ë¦¬</h2>
            <p>ë‚ ì§œë¥¼ ì„ íƒí•˜ì—¬ í•´ë‹¹ ë‚ ì— ì‘ì„±ëœ ëª¨ë“  í•™ìƒì˜ í•œì¤„í‰ì„ í™•ì¸í•˜ê³  í‰ê°€ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          </div>
          <div class="card-body" style="padding: 20px 24px;">

            <!-- ë‚ ì§œ ì„ íƒ í•„í„° -->
            <div class="date-filter-row">
              <input
                type="date"
                id="adminReviewDateFilter"
                class="form-input"
                aria-label="ì¡°íšŒí•  ë‚ ì§œ ì„ íƒ"
              />
              <button class="btn btn--secondary btn--sm" id="btnFilterReviews" type="button">
                ì¡°íšŒ
              </button>
            </div>

            <!-- í•œì¤„í‰ ëª©ë¡ ì„¹ì…˜ -->
            <div class="section-title">
              <span id="adminReviewDateLabel">ì„ íƒëœ ë‚ ì§œì˜ í•œì¤„í‰</span>
              <span class="review-count-badge" id="adminReviewCountBadge">0ê±´</span>
            </div>

            <!-- í•œì¤„í‰ ëª©ë¡ (JSì—ì„œ ë™ì ìœ¼ë¡œ ì±„ì›€) -->
            <div id="adminReviewListContainer"></div>
          </div>
        </div>

        <hr class="divider" />

        <button class="btn btn--danger btn--full" id="btnAdminLogout" type="button">
          ë¡œê·¸ì•„ì›ƒ
        </button>
      </div>

    </div><!-- /.app-container -->

    <script>
      // =========================================
      // ìƒìˆ˜ ë° ì„¤ì •
      // =========================================

      /**
       * ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ê²€ì¦ì´ë¯€ë¡œ ë³´ì•ˆ í•œê³„ ìˆìŒ.
       * ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì„œë²„ ì¸¡ ì¸ì¦ìœ¼ë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤.)
       */
      const ADMIN_PASSWORD = 'admin1234';

      /** localStorage í‚¤: ê°€ì… ì‚¬ìš©ì ë°°ì—´ */
      const USERS_STORAGE_KEY = 'auth-system-users';

      /** localStorage í‚¤: í•œì¤„í‰ ë°°ì—´ */
      const REVIEWS_STORAGE_KEY = 'auth-system-reviews';

      /** í•œì¤„í‰ ìµœëŒ€ ê¸€ì ìˆ˜ */
      const REVIEW_MAX_LENGTH = 100;

      /**
       * í™”ë©´ ID ëª©ë¡ â€” ìƒíƒœ ë¨¸ì‹ (State Machine)ìœ¼ë¡œ í™”ë©´ ì „í™˜ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
       * ê° ê°’ì€ ì‹¤ì œ DOM ìš”ì†Œì˜ id ì†ì„±ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
       */
      const SCREENS = {
        MAIN: 'screenMain',
        REGISTER: 'screenRegister',
        USER_LOGIN: 'screenUserLogin',
        USER_HOME: 'screenUserHome',
        ADMIN_LOGIN: 'screenAdminLogin',
        ADMIN_DASHBOARD: 'screenAdminDashboard',
      };

      /** í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì (ì„¸ì…˜ ë©”ëª¨ë¦¬) */
      let currentUser = null;

      // =========================================
      // ë‚ ì§œ ìœ í‹¸ë¦¬í‹°
      // =========================================

      /**
       * ì˜¤ëŠ˜ ë‚ ì§œë¥¼ 'YYYY-MM-DD' í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
       * @returns {string}
       */
      function getTodayKey() {
        const now = new Date();
        const y = now.getFullYear();
        const m = String(now.getMonth() + 1).padStart(2, '0');
        const d = String(now.getDate()).padStart(2, '0');
        return `${y}-${m}-${d}`;
      }

      /**
       * 'YYYY-MM-DD' í˜•ì‹ì˜ ë‚ ì§œ ë¬¸ìì—´ì„ í•œêµ­ì–´ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
       * @param {string} dateKey
       * @returns {string} ì˜ˆ: "2026ë…„ 2ì›” 21ì¼"
       */
      function formatDateKorean(dateKey) {
        const [y, m, d] = dateKey.split('-');
        return `${y}ë…„ ${Number(m)}ì›” ${Number(d)}ì¼`;
      }

      // =========================================
      // ì‚¬ìš©ì ìŠ¤í† ë¦¬ì§€ ë ˆì´ì–´
      // =========================================

      /**
       * localStorageì—ì„œ ê°€ì… ì‚¬ìš©ì ë°°ì—´ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
       * @returns {Array<{ id: string, grade: string, classNum: string, name: string, password: string }>}
       */
      function loadUsersFromStorage() {
        try {
          const raw = localStorage.getItem(USERS_STORAGE_KEY);
          if (!raw) return [];
          const parsed = JSON.parse(raw);
          return Array.isArray(parsed) ? parsed : [];
        } catch {
          return [];
        }
      }

      /**
       * ì‚¬ìš©ì ë°°ì—´ì„ localStorageì— ì €ì¥í•©ë‹ˆë‹¤.
       * @param {Array} users
       */
      function saveUsersToStorage(users) {
        try {
          localStorage.setItem(USERS_STORAGE_KEY, JSON.stringify(users));
        } catch {
          console.warn('ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
      }

      /**
       * ìƒˆ ì‚¬ìš©ìë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
       * ë™ì¼í•œ ì´ë¦„ì´ ì´ë¯¸ ì¡´ì¬í•˜ë©´ ì‹¤íŒ¨ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
       *
       * @param {{ grade: string, classNum: string, name: string, password: string }} userData
       * @returns {{ success: boolean, reason?: string }}
       */
      function registerUser(userData) {
        const users = loadUsersFromStorage();

        // ì¤‘ë³µ ì´ë¦„ ê²€ì‚¬ (ì´ë¦„ìœ¼ë¡œë§Œ ì‹ë³„ â€” ê°™ì€ ì´ë¦„ì€ í—ˆìš©í•˜ì§€ ì•ŠìŒ)
        const isDuplicate = users.some(
          (u) => u.name.trim() === userData.name.trim()
        );
        if (isDuplicate) {
          return { success: false, reason: 'duplicate' };
        }

        const newUser = {
          id: Date.now().toString(),
          grade: userData.grade,
          classNum: userData.classNum,
          name: userData.name.trim(),
          password: userData.password,
        };

        users.push(newUser);
        saveUsersToStorage(users);
        return { success: true };
      }

      /**
       * ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ì‚¬ìš©ìë¥¼ ì°¾ì•„ ë°˜í™˜í•©ë‹ˆë‹¤.
       *
       * @param {string} name
       * @param {string} password
       * @returns {{ success: boolean, user?: object }}
       */
      function authenticateUser(name, password) {
        const users = loadUsersFromStorage();
        const matched = users.find(
          (u) => u.name.trim() === name.trim() && u.password === password
        );
        if (matched) return { success: true, user: matched };
        return { success: false };
      }

      /**
       * ê°€ì… ì‚¬ìš©ì ëª©ë¡ì„ í•™ë…„ â†’ ë°˜ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.
       * @returns {Array}
       */
      function getSortedUsers() {
        const users = loadUsersFromStorage();
        return users.slice().sort((a, b) => {
          const gradeDiff = Number(a.grade) - Number(b.grade);
          if (gradeDiff !== 0) return gradeDiff;
          return Number(a.classNum) - Number(b.classNum);
        });
      }

      // =========================================
      // í•œì¤„í‰ ìŠ¤í† ë¦¬ì§€ ë ˆì´ì–´
      // =========================================

      /**
       * localStorageì—ì„œ í•œì¤„í‰ ë°°ì—´ ì „ì²´ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
       * @returns {Array<{
       *   id: string,
       *   userId: string,
       *   userName: string,
       *   userGrade: string,
       *   userClass: string,
       *   dateKey: string,
       *   content: string,
       *   adminComment: string,
       *   createdAt: string
       * }>}
       */
      function loadReviewsFromStorage() {
        try {
          const raw = localStorage.getItem(REVIEWS_STORAGE_KEY);
          if (!raw) return [];
          const parsed = JSON.parse(raw);
          return Array.isArray(parsed) ? parsed : [];
        } catch {
          return [];
        }
      }

      /**
       * í•œì¤„í‰ ë°°ì—´ì„ localStorageì— ì €ì¥í•©ë‹ˆë‹¤.
       * @param {Array} reviews
       */
      function saveReviewsToStorage(reviews) {
        try {
          localStorage.setItem(REVIEWS_STORAGE_KEY, JSON.stringify(reviews));
        } catch {
          console.warn('í•œì¤„í‰ ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
      }

      /**
       * íŠ¹ì • ì‚¬ìš©ìì˜ íŠ¹ì • ë‚ ì§œ í•œì¤„í‰ì„ ì°¾ì•„ ë°˜í™˜í•©ë‹ˆë‹¤.
       * @param {string} userId
       * @param {string} dateKey - 'YYYY-MM-DD'
       * @returns {object|null}
       */
      function findReview(userId, dateKey) {
        const reviews = loadReviewsFromStorage();
        return reviews.find((r) => r.userId === userId && r.dateKey === dateKey) || null;
      }

      /**
       * í•œì¤„í‰ì„ ì €ì¥í•˜ê±°ë‚˜ ìˆ˜ì •í•©ë‹ˆë‹¤.
       * - ê°™ì€ ì‚¬ìš©ìì˜ ê°™ì€ ë‚ ì§œ í•œì¤„í‰ì´ ì´ë¯¸ ìˆìœ¼ë©´ ë‚´ìš©ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
       * - ì—†ìœ¼ë©´ ìƒˆë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.
       *
       * @param {{ userId: string, userName: string, userGrade: string, userClass: string, dateKey: string, content: string }} reviewData
       * @returns {{ success: boolean, isUpdate: boolean }}
       */
      function upsertReview(reviewData) {
        const reviews = loadReviewsFromStorage();
        const existingIndex = reviews.findIndex(
          (r) => r.userId === reviewData.userId && r.dateKey === reviewData.dateKey
        );

        if (existingIndex !== -1) {
          // ê¸°ì¡´ í•œì¤„í‰ ìˆ˜ì • (ê´€ë¦¬ì í‰ê°€ ì½”ë©˜íŠ¸ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€)
          reviews[existingIndex] = {
            ...reviews[existingIndex],
            content: reviewData.content,
            updatedAt: new Date().toISOString(),
          };
          saveReviewsToStorage(reviews);
          return { success: true, isUpdate: true };
        }

        // ìƒˆ í•œì¤„í‰ ì¶”ê°€
        const newReview = {
          id: Date.now().toString(),
          userId: reviewData.userId,
          userName: reviewData.userName,
          userGrade: reviewData.userGrade,
          userClass: reviewData.userClass,
          dateKey: reviewData.dateKey,
          content: reviewData.content,
          adminComment: '',
          createdAt: new Date().toISOString(),
        };
        reviews.push(newReview);
        saveReviewsToStorage(reviews);
        return { success: true, isUpdate: false };
      }

      /**
       * ê´€ë¦¬ì í‰ê°€ ì½”ë©˜íŠ¸ë¥¼ íŠ¹ì • í•œì¤„í‰(id)ì— ì €ì¥í•©ë‹ˆë‹¤.
       * @param {string} reviewId
       * @param {string} comment
       * @returns {boolean} ì„±ê³µ ì—¬ë¶€
       */
      function saveAdminComment(reviewId, comment) {
        const reviews = loadReviewsFromStorage();
        const idx = reviews.findIndex((r) => r.id === reviewId);
        if (idx === -1) return false;

        reviews[idx].adminComment = comment.trim();
        reviews[idx].commentedAt = new Date().toISOString();
        saveReviewsToStorage(reviews);
        return true;
      }

      /**
       * íŠ¹ì • ì‚¬ìš©ìì˜ í•œì¤„í‰ì„ ìµœê·¼ìˆœìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
       * @param {string} userId
       * @returns {Array}
       */
      function getReviewsByUser(userId) {
        const reviews = loadReviewsFromStorage();
        return reviews
          .filter((r) => r.userId === userId)
          .sort((a, b) => b.dateKey.localeCompare(a.dateKey));
      }

      /**
       * íŠ¹ì • ë‚ ì§œì˜ ëª¨ë“  í•œì¤„í‰ì„ í•™ë…„ â†’ ë°˜ â†’ ì´ë¦„ ìˆœìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.
       * @param {string} dateKey - 'YYYY-MM-DD'
       * @returns {Array}
       */
      function getReviewsByDate(dateKey) {
        const reviews = loadReviewsFromStorage();
        return reviews
          .filter((r) => r.dateKey === dateKey)
          .sort((a, b) => {
            const gradeDiff = Number(a.userGrade) - Number(b.userGrade);
            if (gradeDiff !== 0) return gradeDiff;
            const classDiff = Number(a.userClass) - Number(b.userClass);
            if (classDiff !== 0) return classDiff;
            return a.userName.localeCompare(b.userName);
          });
      }

      // =========================================
      // í™”ë©´ ì „í™˜ (ìƒíƒœ ë¨¸ì‹ )
      // =========================================

      /**
       * ì§€ì •í•œ í™”ë©´ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤.
       * ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í™”ë©´ì—ì„œëŠ” ì»¨í…Œì´ë„ˆ ë„ˆë¹„ë¥¼ ë„“í™ë‹ˆë‹¤.
       * @param {string} screenId - SCREENS ìƒìˆ˜ ì¤‘ í•˜ë‚˜ì˜ ê°’
       */
      function navigateTo(screenId) {
        Object.values(SCREENS).forEach((id) => {
          const el = document.getElementById(id);
          if (el) el.classList.remove('active');
        });
        const targetEl = document.getElementById(screenId);
        if (targetEl) targetEl.classList.add('active');

        // ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì¼ ë•Œ ì»¨í…Œì´ë„ˆ ìµœëŒ€ ë„ˆë¹„ í™•ì¥
        const container = document.getElementById('appContainer');
        if (screenId === SCREENS.ADMIN_DASHBOARD) {
          container.classList.add('wide');
        } else {
          container.classList.remove('wide');
        }
      }

      // =========================================
      // ê³µí†µ ìœ í‹¸: ì…ë ¥ ì—ëŸ¬ í”ë“¤ê¸° / ì•Œë¦¼ í‘œì‹œ
      // =========================================

      /**
       * ì§€ì •ëœ input/select ìš”ì†Œì— í”ë“¤ë¦¼ ì• ë‹ˆë©”ì´ì…˜ì„ ì ìš©í•©ë‹ˆë‹¤.
       * @param {HTMLElement} el
       */
      function shakeElement(el) {
        el.classList.add('input-error-shake');
        setTimeout(() => el.classList.remove('input-error-shake'), 400);
      }

      /**
       * ì•Œë¦¼ ë°•ìŠ¤ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
       * @param {string} alertElId - alert ë˜í¼ ìš”ì†Œ id
       * @param {string} iconElId  - ì•„ì´ì½˜ span id
       * @param {string} msgElId   - ë©”ì‹œì§€ span id
       * @param {'success'|'error'|'warning'|'info'} type
       * @param {string} icon
       * @param {string} message
       */
      function showAlert(alertElId, iconElId, msgElId, type, icon, message) {
        const alertEl = document.getElementById(alertElId);
        const iconEl  = document.getElementById(iconElId);
        const msgEl   = document.getElementById(msgElId);
        alertEl.className = `alert alert--${type}`;
        iconEl.textContent  = icon;
        msgEl.textContent   = message;
        alertEl.style.display = 'flex';
      }

      /**
       * ì•Œë¦¼ ë°•ìŠ¤ë¥¼ ìˆ¨ê¹ë‹ˆë‹¤.
       * @param {string} alertElId
       */
      function hideAlert(alertElId) {
        const alertEl = document.getElementById(alertElId);
        if (alertEl) alertEl.style.display = 'none';
      }

      // =========================================
      // íšŒì›ê°€ì… í™”ë©´ í•¸ë“¤ëŸ¬
      // =========================================

      /**
       * íšŒì›ê°€ì… í¼ì„ ì´ˆê¸° ìƒíƒœë¡œ ë¦¬ì…‹í•©ë‹ˆë‹¤.
       */
      function resetRegisterForm() {
        document.getElementById('registerGrade').value = '';
        document.getElementById('registerClass').value = '';
        document.getElementById('registerName').value = '';
        document.getElementById('registerPassword').value = '';
        document.getElementById('registerPasswordConfirm').value = '';
        hideAlert('registerAlert');
      }

      /**
       * íšŒì›ê°€ì… ì œì¶œì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
       * ìœ íš¨ì„± ê²€ì‚¬ â†’ ì¤‘ë³µ ê²€ì‚¬ â†’ ì €ì¥ ìˆœìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.
       */
      function handleRegisterSubmit() {
        const gradeEl    = document.getElementById('registerGrade');
        const classEl    = document.getElementById('registerClass');
        const nameEl     = document.getElementById('registerName');
        const pwEl       = document.getElementById('registerPassword');
        const pwConfEl   = document.getElementById('registerPasswordConfirm');

        const grade    = gradeEl.value;
        const classNum = classEl.value;
        const name     = nameEl.value.trim();
        const password = pwEl.value;
        const pwConf   = pwConfEl.value;

        // --- ìœ íš¨ì„± ê²€ì‚¬ ---
        if (!grade) {
          shakeElement(gradeEl);
          showAlert('registerAlert', 'registerAlertIcon', 'registerAlertMsg', 'error', 'âš ï¸', 'í•™ë…„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
          gradeEl.focus();
          return;
        }
        if (!classNum) {
          shakeElement(classEl);
          showAlert('registerAlert', 'registerAlertIcon', 'registerAlertMsg', 'error', 'âš ï¸', 'ë°˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
          classEl.focus();
          return;
        }
        if (!name) {
          shakeElement(nameEl);
          showAlert('registerAlert', 'registerAlertIcon', 'registerAlertMsg', 'error', 'âš ï¸', 'ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          nameEl.focus();
          return;
        }
        if (!password) {
          shakeElement(pwEl);
          showAlert('registerAlert', 'registerAlertIcon', 'registerAlertMsg', 'error', 'âš ï¸', 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          pwEl.focus();
          return;
        }
        if (password.length < 4) {
          shakeElement(pwEl);
          showAlert('registerAlert', 'registerAlertIcon', 'registerAlertMsg', 'error', 'âš ï¸', 'ë¹„ë°€ë²ˆí˜¸ëŠ” 4ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
          pwEl.focus();
          return;
        }
        if (password !== pwConf) {
          shakeElement(pwConfEl);
          showAlert('registerAlert', 'registerAlertIcon', 'registerAlertMsg', 'error', 'âš ï¸', 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.');
          pwConfEl.value = '';
          pwConfEl.focus();
          return;
        }

        // --- ë„ë©”ì¸ ë¡œì§: ë“±ë¡ ---
        const result = registerUser({ grade, classNum, name, password });

        if (!result.success) {
          if (result.reason === 'duplicate') {
            shakeElement(nameEl);
            showAlert('registerAlert', 'registerAlertIcon', 'registerAlertMsg', 'error', 'âš ï¸', `"${name}" ì´ë¦„ìœ¼ë¡œ ì´ë¯¸ ê°€ì…ëœ ê³„ì •ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.`);
            nameEl.focus();
          }
          return;
        }

        // --- ê°€ì… ì„±ê³µ ---
        showAlert('registerAlert', 'registerAlertIcon', 'registerAlertMsg', 'success', 'âœ…', `ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ${grade}í•™ë…„ ${classNum}ë°˜ ${name} ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!`);
        // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™” (ì•Œë¦¼ ë©”ì‹œì§€ëŠ” ìœ ì§€)
        gradeEl.value = '';
        classEl.value = '';
        nameEl.value = '';
        pwEl.value = '';
        pwConfEl.value = '';
      }

      // =========================================
      // ì‚¬ìš©ì ë¡œê·¸ì¸ í™”ë©´ í•¸ë“¤ëŸ¬
      // =========================================

      /**
       * ì‚¬ìš©ì ë¡œê·¸ì¸ í¼ì„ ì´ˆê¸° ìƒíƒœë¡œ ë¦¬ì…‹í•©ë‹ˆë‹¤.
       */
      function resetUserLoginForm() {
        document.getElementById('userLoginName').value = '';
        document.getElementById('userLoginPassword').value = '';
        hideAlert('userLoginAlert');
      }

      /**
       * ì‚¬ìš©ì ë¡œê·¸ì¸ ì œì¶œì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
       * ì„±ê³µ ì‹œ ì‚¬ìš©ì í™ˆ í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
       */
      function handleUserLoginSubmit() {
        const nameEl = document.getElementById('userLoginName');
        const pwEl   = document.getElementById('userLoginPassword');

        const name     = nameEl.value.trim();
        const password = pwEl.value;

        if (!name) {
          shakeElement(nameEl);
          document.getElementById('userLoginAlertMsg').textContent = 'ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
          document.getElementById('userLoginAlert').style.display = 'flex';
          nameEl.focus();
          return;
        }
        if (!password) {
          shakeElement(pwEl);
          document.getElementById('userLoginAlertMsg').textContent = 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
          document.getElementById('userLoginAlert').style.display = 'flex';
          pwEl.focus();
          return;
        }

        const { success, user } = authenticateUser(name, password);

        if (!success) {
          shakeElement(nameEl);
          shakeElement(pwEl);
          document.getElementById('userLoginAlertMsg').textContent = 'ì´ë¦„ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.';
          document.getElementById('userLoginAlert').style.display = 'flex';
          pwEl.value = '';
          pwEl.focus();
          return;
        }

        // ë¡œê·¸ì¸ ì„±ê³µ â€” í˜„ì¬ ì‚¬ìš©ì ì„¸ì…˜ ì €ì¥ í›„ í™ˆ í™”ë©´ìœ¼ë¡œ ì´ë™
        currentUser = user;
        hideAlert('userLoginAlert');
        nameEl.value = '';
        pwEl.value   = '';
        renderUserHome(user);
        navigateTo(SCREENS.USER_HOME);
      }

      // =========================================
      // ì‚¬ìš©ì í™ˆ í™”ë©´ ë Œë”ë§ ë° í•œì¤„í‰ ê¸°ëŠ¥
      // =========================================

      /**
       * ì‚¬ìš©ì í™ˆ í™”ë©´ ì „ì²´ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.
       * í”„ë¡œí•„ ì •ë³´, í•œì¤„í‰ ì‘ì„± ì˜ì—­, ë‚´ í•œì¤„í‰ ëª©ë¡ì„ ëª¨ë‘ ê°±ì‹ í•©ë‹ˆë‹¤.
       * @param {{ id: string, grade: string, classNum: string, name: string }} user
       */
      function renderUserHome(user) {
        // í”„ë¡œí•„ ì •ë³´ í‘œì‹œ
        document.getElementById('welcomeTitle').textContent = `${user.name} ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!`;
        document.getElementById('welcomeSubtitle').textContent = 'ë¡œê·¸ì¸ì— ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤.';
        document.getElementById('homeGrade').textContent = `${user.grade}í•™ë…„`;
        document.getElementById('homeClass').textContent = `${user.classNum}ë°˜`;
        document.getElementById('homeName').textContent = user.name;

        // ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ
        const todayKey = getTodayKey();
        document.getElementById('todayDateText').textContent = formatDateKorean(todayKey);

        // í•œì¤„í‰ ì‘ì„± ì˜ì—­ ì´ˆê¸°í™”
        renderReviewWriteSection(user, todayKey);

        // ë‚´ í•œì¤„í‰ ëª©ë¡ ë Œë”ë§
        renderMyReviewList(user);
      }

      /**
       * í•œì¤„í‰ ì‘ì„±/ìˆ˜ì • ì„¹ì…˜ì„ ë Œë”ë§í•©ë‹ˆë‹¤.
       * ì˜¤ëŠ˜ ì´ë¯¸ ì‘ì„±í•œ í•œì¤„í‰ì´ ìˆìœ¼ë©´ ê¸°ì¡´ ë‚´ìš©ì„ ì…ë ¥ì°½ì— ì±„ì›Œì¤ë‹ˆë‹¤.
       * @param {object} user
       * @param {string} todayKey
       */
      function renderReviewWriteSection(user, todayKey) {
        const textarea   = document.getElementById('reviewContentInput');
        const submitBtn  = document.getElementById('btnSubmitReview');
        const charCount  = document.getElementById('reviewCharCount');

        // ì˜¤ëŠ˜ ì‘ì„±í•œ í•œì¤„í‰ ì¡°íšŒ
        const existing = findReview(user.id, todayKey);

        if (existing) {
          // ì´ë¯¸ ì‘ì„±í•œ ê²½ìš°: ê¸°ì¡´ ë‚´ìš© ì±„ì›Œì£¼ê³  ë²„íŠ¼ í…ìŠ¤íŠ¸ë¥¼ "ìˆ˜ì •"ìœ¼ë¡œ ë³€ê²½
          textarea.value = existing.content;
          submitBtn.textContent = 'í•œì¤„í‰ ìˆ˜ì •';
          updateCharCount(textarea.value.length, charCount);
        } else {
          // ì‘ì„± ì „: ì…ë ¥ì°½ ë¹„ìš°ê¸°
          textarea.value = '';
          submitBtn.textContent = 'í•œì¤„í‰ ë“±ë¡';
          updateCharCount(0, charCount);
        }

        // ì•Œë¦¼ ì´ˆê¸°í™”
        hideAlert('reviewWriteAlert');
      }

      /**
       * ê¸€ì ìˆ˜ ì¹´ìš´í„° UIë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.
       * @param {number} count
       * @param {HTMLElement} countEl
       */
      function updateCharCount(count, countEl) {
        countEl.textContent = `${count} / ${REVIEW_MAX_LENGTH}ì`;
        countEl.classList.remove('near-limit', 'at-limit');
        if (count >= REVIEW_MAX_LENGTH) {
          countEl.classList.add('at-limit');
        } else if (count >= REVIEW_MAX_LENGTH * 0.8) {
          countEl.classList.add('near-limit');
        }
      }

      /**
       * í•œì¤„í‰ ë“±ë¡/ìˆ˜ì • ë²„íŠ¼ í´ë¦­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
       */
      function handleSubmitReview() {
        if (!currentUser) return;

        const textarea  = document.getElementById('reviewContentInput');
        const content   = textarea.value.trim();
        const todayKey  = getTodayKey();

        if (!content) {
          shakeElement(textarea);
          showAlert('reviewWriteAlert', 'reviewWriteAlertIcon', 'reviewWriteAlertMsg', 'error', 'âš ï¸', 'í•œì¤„í‰ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          textarea.focus();
          return;
        }

        const result = upsertReview({
          userId:    currentUser.id,
          userName:  currentUser.name,
          userGrade: currentUser.grade,
          userClass: currentUser.classNum,
          dateKey:   todayKey,
          content:   content,
        });

        if (result.isUpdate) {
          showAlert('reviewWriteAlert', 'reviewWriteAlertIcon', 'reviewWriteAlertMsg', 'success', 'âœ…', 'í•œì¤„í‰ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } else {
          showAlert('reviewWriteAlert', 'reviewWriteAlertIcon', 'reviewWriteAlertMsg', 'success', 'âœ…', 'í•œì¤„í‰ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ë²„íŠ¼ í…ìŠ¤íŠ¸ ìˆ˜ì • ëª¨ë“œë¡œ ì „í™˜
        document.getElementById('btnSubmitReview').textContent = 'í•œì¤„í‰ ìˆ˜ì •';

        // ë‚´ ëª©ë¡ ê°±ì‹ 
        renderMyReviewList(currentUser);
      }

      /**
       * ë‚´ í•œì¤„í‰ ëª©ë¡ì„ ë Œë”ë§í•©ë‹ˆë‹¤. (ìµœê·¼ìˆœ)
       * @param {object} user
       */
      function renderMyReviewList(user) {
        const container = document.getElementById('myReviewListContainer');
        const todayKey  = getTodayKey();
        const reviews   = getReviewsByUser(user.id);

        if (reviews.length === 0) {
          container.innerHTML = `
            <div class="review-list-empty">
              <span class="review-list-empty-icon">ğŸ“</span>
              ì•„ì§ ì‘ì„±í•œ í•œì¤„í‰ì´ ì—†ìŠµë‹ˆë‹¤.<br/>
              ì˜¤ëŠ˜ì˜ í•œì¤„í‰ì„ ë‚¨ê²¨ë³´ì„¸ìš”!
            </div>
          `;
          return;
        }

        const items = reviews.map((review) => {
          const isToday = review.dateKey === todayKey;
          const dateLabel = isToday
            ? `ì˜¤ëŠ˜ Â· ${formatDateKorean(review.dateKey)}`
            : formatDateKorean(review.dateKey);

          // ê´€ë¦¬ì í‰ê°€ ì½”ë©˜íŠ¸ ì˜ì—­ (ìˆì„ ë•Œë§Œ í‘œì‹œ)
          const commentHtml = review.adminComment
            ? `
              <div class="admin-comment-box">
                <span class="admin-comment-label">ì„ ìƒë‹˜ í‰ê°€</span>
                <span class="admin-comment-text">${escapeHtml(review.adminComment)}</span>
              </div>
            `
            : '';

          return `
            <div class="review-item">
              <div class="review-item-header">
                <span class="review-item-date ${isToday ? 'is-today' : ''}">${escapeHtml(dateLabel)}</span>
              </div>
              <div class="review-item-body">
                <div class="review-item-content">${escapeHtml(review.content)}</div>
                ${commentHtml}
              </div>
            </div>
          `;
        }).join('');

        container.innerHTML = `<div class="review-list">${items}</div>`;
      }

      // =========================================
      // ê´€ë¦¬ì ë¡œê·¸ì¸ í•¸ë“¤ëŸ¬
      // =========================================

      /**
       * ê´€ë¦¬ì ë¡œê·¸ì¸ ì‹œë„ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
       */
      function handleAdminLogin() {
        const passwordInput = document.getElementById('adminPasswordInput');
        const enteredPassword = passwordInput.value;

        if (!enteredPassword) {
          showAdminLoginError('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          shakeElement(passwordInput);
          return;
        }

        if (enteredPassword !== ADMIN_PASSWORD) {
          showAdminLoginError('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
          passwordInput.value = '';
          shakeElement(passwordInput);
          passwordInput.focus();
          return;
        }

        // ë¡œê·¸ì¸ ì„±ê³µ
        document.getElementById('adminLoginError').style.display = 'none';
        passwordInput.value = '';
        navigateTo(SCREENS.ADMIN_DASHBOARD);
        renderDashboard();
      }

      /**
       * ê´€ë¦¬ì ë¡œê·¸ì¸ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
       * @param {string} message
       */
      function showAdminLoginError(message) {
        document.getElementById('adminLoginErrorMsg').textContent = message;
        document.getElementById('adminLoginError').style.display = 'flex';
      }

      // =========================================
      // ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í•¸ë“¤ëŸ¬
      // =========================================

      /**
       * ëŒ€ì‹œë³´ë“œ ì „ì²´ë¥¼ í˜„ì¬ ìƒíƒœì— ë§ê²Œ ë Œë”ë§í•©ë‹ˆë‹¤.
       * ì‚¬ìš©ì ëª©ë¡ + í•œì¤„í‰ ê´€ë¦¬ ì„¹ì…˜ì„ ëª¨ë‘ ê°±ì‹ í•©ë‹ˆë‹¤.
       */
      function renderDashboard() {
        renderUserList();
        initAdminReviewSection();
      }

      /**
       * ê°€ì… ì‚¬ìš©ì ëª©ë¡ í…Œì´ë¸”ì„ ë Œë”ë§í•©ë‹ˆë‹¤.
       * í•™ë…„ â†’ ë°˜ ìˆœìœ¼ë¡œ ì •ë ¬í•˜ì—¬ í‘œì‹œí•©ë‹ˆë‹¤.
       */
      function renderUserList() {
        const container  = document.getElementById('userListContainer');
        const countBadge = document.getElementById('userCountBadge');
        const sortedUsers = getSortedUsers();

        countBadge.textContent = `${sortedUsers.length}ëª…`;

        if (sortedUsers.length === 0) {
          container.innerHTML = `
            <div class="user-list-empty">
              <span class="user-list-empty-icon">ğŸ‘¥</span>
              ì•„ì§ ê°€ì…í•œ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.<br/>
              ì‚¬ìš©ìê°€ íšŒì›ê°€ì…í•˜ë©´ ì´ê³³ì— í‘œì‹œë©ë‹ˆë‹¤.
            </div>
          `;
          return;
        }

        // í…Œì´ë¸” êµ¬ì„±
        const rows = sortedUsers.map((user, index) => `
          <tr>
            <td>${index + 1}</td>
            <td>${escapeHtml(user.grade)}í•™ë…„</td>
            <td>${escapeHtml(user.classNum)}ë°˜</td>
            <td>${escapeHtml(user.name)}</td>
          </tr>
        `).join('');

        container.innerHTML = `
          <table class="user-list-table" aria-label="ê°€ì… ì‚¬ìš©ì ëª©ë¡">
            <thead>
              <tr>
                <th>ë²ˆí˜¸</th>
                <th>í•™ë…„</th>
                <th>ë°˜</th>
                <th>ì´ë¦„</th>
              </tr>
            </thead>
            <tbody>
              ${rows}
            </tbody>
          </table>
        `;
      }

      /**
       * ê´€ë¦¬ì í•œì¤„í‰ ê´€ë¦¬ ì„¹ì…˜ ì´ˆê¸°í™”.
       * ë‚ ì§œ í•„í„°ë¥¼ ì˜¤ëŠ˜ë¡œ ì´ˆê¸°í™”í•˜ê³  í•œì¤„í‰ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
       */
      function initAdminReviewSection() {
        const dateFilterInput = document.getElementById('adminReviewDateFilter');
        dateFilterInput.value = getTodayKey();
        renderAdminReviewList(getTodayKey());
      }

      /**
       * íŠ¹ì • ë‚ ì§œì˜ í•œì¤„í‰ ëª©ë¡ì„ ê´€ë¦¬ì ë·°ì— ë Œë”ë§í•©ë‹ˆë‹¤.
       * ê° í•­ëª©ì—ëŠ” í•™ë…„/ë°˜/ì´ë¦„, í•œì¤„í‰ ë‚´ìš©, ê¸°ì¡´ í‰ê°€ (ìˆìœ¼ë©´), í‰ê°€ ì…ë ¥ì°½ì´ í‘œì‹œë©ë‹ˆë‹¤.
       * @param {string} dateKey - 'YYYY-MM-DD'
       */
      function renderAdminReviewList(dateKey) {
        const container  = document.getElementById('adminReviewListContainer');
        const countBadge = document.getElementById('adminReviewCountBadge');
        const dateLabel  = document.getElementById('adminReviewDateLabel');

        dateLabel.textContent = `${formatDateKorean(dateKey)} í•œì¤„í‰`;

        const reviews = getReviewsByDate(dateKey);
        countBadge.textContent = `${reviews.length}ê±´`;

        if (reviews.length === 0) {
          container.innerHTML = `
            <div class="admin-review-empty">
              <span class="admin-review-empty-icon">ğŸ“­</span>
              í•´ë‹¹ ë‚ ì§œì— ì‘ì„±ëœ í•œì¤„í‰ì´ ì—†ìŠµë‹ˆë‹¤.
            </div>
          `;
          return;
        }

        const items = reviews.map((review) => {
          // ê¸°ì¡´ í‰ê°€ ì½”ë©˜íŠ¸ ì˜ì—­
          const existingCommentHtml = review.adminComment
            ? `
              <div class="existing-comment-box" id="existingComment-${escapeHtml(review.id)}">
                <span class="existing-comment-label">í˜„ì¬ í‰ê°€</span>
                <span class="existing-comment-text">${escapeHtml(review.adminComment)}</span>
              </div>
            `
            : '';

          return `
            <div class="admin-review-item">
              <div class="admin-review-item-header">
                <span class="admin-review-user-badge">
                  ${escapeHtml(review.userGrade)}í•™ë…„ ${escapeHtml(review.userClass)}ë°˜ ${escapeHtml(review.userName)}
                </span>
              </div>
              <div class="admin-review-item-body">
                <div class="admin-review-content">${escapeHtml(review.content)}</div>
                ${existingCommentHtml}
                <div class="admin-comment-input-row">
                  <input
                    type="text"
                    class="form-input"
                    id="commentInput-${escapeHtml(review.id)}"
                    placeholder="${review.adminComment ? 'í‰ê°€ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”' : 'í‰ê°€ ì½”ë©˜íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”'}"
                    maxlength="150"
                    value="${escapeHtml(review.adminComment)}"
                    aria-label="${escapeHtml(review.userName)} í•™ìƒ í•œì¤„í‰ í‰ê°€ ì…ë ¥"
                  />
                  <button
                    class="btn btn--success btn--sm"
                    type="button"
                    onclick="handleSaveAdminComment('${escapeHtml(review.id)}', '${escapeAttr(dateKey)}')"
                    aria-label="í‰ê°€ ì €ì¥"
                  >
                    ì €ì¥
                  </button>
                </div>
              </div>
            </div>
          `;
        }).join('');

        container.innerHTML = `<div class="admin-review-list">${items}</div>`;
      }

      /**
       * ê´€ë¦¬ìê°€ íŠ¹ì • í•œì¤„í‰ì— í‰ê°€ ì½”ë©˜íŠ¸ë¥¼ ì €ì¥í•˜ëŠ” í•¸ë“¤ëŸ¬ì…ë‹ˆë‹¤.
       * ì¸ë¼ì¸ onclickì—ì„œ í˜¸ì¶œë©ë‹ˆë‹¤.
       * @param {string} reviewId
       * @param {string} dateKey - ëª©ë¡ ì¬ë Œë”ë§ì„ ìœ„í•´ í˜„ì¬ ë‚ ì§œ ìœ ì§€
       */
      function handleSaveAdminComment(reviewId, dateKey) {
        const input   = document.getElementById(`commentInput-${reviewId}`);
        const comment = input ? input.value : '';

        const success = saveAdminComment(reviewId, comment);
        if (!success) {
          alert('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
          return;
        }

        // ëª©ë¡ ê°±ì‹  (ì €ì¥ í›„ í˜„ì¬ ë‚ ì§œ í•„í„° ìœ ì§€)
        renderAdminReviewList(dateKey);
      }

      /**
       * HTML ì†ì„±ì— ì‚½ì…í•  ë•Œ ì¶”ê°€ë¡œ í™‘ë”°ì˜´í‘œë¥¼ ì´ìŠ¤ì¼€ì´í”„í•©ë‹ˆë‹¤.
       * onclick="..." ì†ì„± ë‚´ ë¬¸ìì—´ ì¸ììš©ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
       * @param {string} str
       * @returns {string}
       */
      function escapeAttr(str) {
        return String(str)
          .replace(/&/g, '&amp;')
          .replace(/'/g, '&#39;')
          .replace(/"/g, '&quot;');
      }

      /**
       * XSS ë°©ì§€ë¥¼ ìœ„í•´ HTML íŠ¹ìˆ˜ë¬¸ìë¥¼ ì´ìŠ¤ì¼€ì´í”„í•©ë‹ˆë‹¤.
       * @param {string} str
       * @returns {string}
       */
      function escapeHtml(str) {
        return String(str)
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/"/g, '&quot;')
          .replace(/'/g, '&#39;');
      }

      /**
       * ê´€ë¦¬ì ë¡œê·¸ì•„ì›ƒì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
       */
      function handleAdminLogout() {
        navigateTo(SCREENS.MAIN);
      }

      // =========================================
      // ì•± ì´ˆê¸°í™”
      // =========================================

      /**
       * ì•± ì „ì²´ì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•˜ê³  ì´ˆê¸° í™”ë©´ì„ ì„¤ì •í•©ë‹ˆë‹¤.
       */
      function initApp() {

        // role-card(div)ì— í´ë¦­ + í‚¤ë³´ë“œ(Enter/Space) ì ‘ê·¼ì„±ì„ í•¨ê»˜ ë“±ë¡í•˜ëŠ” í—¬í¼
        function addRoleCardListeners(elementId, handler) {
          const el = document.getElementById(elementId);
          if (!el) return;
          el.addEventListener('click', handler);
          el.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              handler();
            }
          });
        }

        // --- ë©”ì¸ í™”ë©´ ---
        addRoleCardListeners('btnGoAdminLogin', () => {
          document.getElementById('adminLoginError').style.display = 'none';
          document.getElementById('adminPasswordInput').value = '';
          navigateTo(SCREENS.ADMIN_LOGIN);
          requestAnimationFrame(() => document.getElementById('adminPasswordInput').focus());
        });

        addRoleCardListeners('btnGoUserLogin', () => {
          resetUserLoginForm();
          navigateTo(SCREENS.USER_LOGIN);
          requestAnimationFrame(() => document.getElementById('userLoginName').focus());
        });

        addRoleCardListeners('btnGoRegister', () => {
          resetRegisterForm();
          navigateTo(SCREENS.REGISTER);
          requestAnimationFrame(() => document.getElementById('registerGrade').focus());
        });

        // --- íšŒì›ê°€ì… í™”ë©´ ---
        document.getElementById('btnBackFromRegister').addEventListener('click', () => {
          navigateTo(SCREENS.MAIN);
        });
        document.getElementById('btnRegisterSubmit').addEventListener('click', handleRegisterSubmit);
        // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì…ë ¥ì—ì„œ Enter ëˆ„ë¥´ë©´ ì œì¶œ
        document.getElementById('registerPasswordConfirm').addEventListener('keydown', (e) => {
          if (e.key === 'Enter') handleRegisterSubmit();
        });
        // íšŒì›ê°€ì… í™”ë©´ â†’ ë¡œê·¸ì¸ìœ¼ë¡œ ì´ë™ ë§í¬
        document.getElementById('btnGoUserLoginFromRegister').addEventListener('click', () => {
          resetUserLoginForm();
          navigateTo(SCREENS.USER_LOGIN);
          requestAnimationFrame(() => document.getElementById('userLoginName').focus());
        });

        // --- ì‚¬ìš©ì ë¡œê·¸ì¸ í™”ë©´ ---
        document.getElementById('btnBackFromUserLogin').addEventListener('click', () => {
          navigateTo(SCREENS.MAIN);
        });
        document.getElementById('btnUserLoginSubmit').addEventListener('click', handleUserLoginSubmit);
        document.getElementById('userLoginPassword').addEventListener('keydown', (e) => {
          if (e.key === 'Enter') handleUserLoginSubmit();
        });
        // ë¡œê·¸ì¸ í™”ë©´ â†’ íšŒì›ê°€ì…ìœ¼ë¡œ ì´ë™ ë§í¬
        document.getElementById('btnGoRegisterFromLogin').addEventListener('click', () => {
          resetRegisterForm();
          navigateTo(SCREENS.REGISTER);
          requestAnimationFrame(() => document.getElementById('registerGrade').focus());
        });

        // --- ì‚¬ìš©ì í™ˆ í™”ë©´ ---
        document.getElementById('btnUserLogout').addEventListener('click', () => {
          currentUser = null;
          navigateTo(SCREENS.MAIN);
        });

        // í•œì¤„í‰ ì‘ì„±/ìˆ˜ì • ë²„íŠ¼
        document.getElementById('btnSubmitReview').addEventListener('click', handleSubmitReview);

        // í•œì¤„í‰ ì…ë ¥ì°½ Enter í‚¤ (Shift+EnterëŠ” ì¤„ë°”ê¿ˆ í—ˆìš©)
        document.getElementById('reviewContentInput').addEventListener('keydown', (e) => {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            handleSubmitReview();
          }
        });

        // í•œì¤„í‰ ì…ë ¥ ê¸€ì ìˆ˜ ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸
        document.getElementById('reviewContentInput').addEventListener('input', (e) => {
          const charCount = document.getElementById('reviewCharCount');
          updateCharCount(e.target.value.length, charCount);
        });

        // --- ê´€ë¦¬ì ë¡œê·¸ì¸ í™”ë©´ ---
        document.getElementById('btnAdminLogin').addEventListener('click', handleAdminLogin);
        document.getElementById('adminPasswordInput').addEventListener('keydown', (e) => {
          if (e.key === 'Enter') handleAdminLogin();
        });
        document.getElementById('btnBackFromAdminLogin').addEventListener('click', () => {
          navigateTo(SCREENS.MAIN);
        });

        // --- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ---
        document.getElementById('btnAdminLogout').addEventListener('click', handleAdminLogout);

        // ë‚ ì§œ í•„í„° ì¡°íšŒ ë²„íŠ¼
        document.getElementById('btnFilterReviews').addEventListener('click', () => {
          const dateKey = document.getElementById('adminReviewDateFilter').value;
          if (!dateKey) {
            alert('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
          }
          renderAdminReviewList(dateKey);
        });

        // ë‚ ì§œ ì…ë ¥ì°½ì—ì„œ Enter í‚¤ë¡œ ì¡°íšŒ
        document.getElementById('adminReviewDateFilter').addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            document.getElementById('btnFilterReviews').click();
          }
        });

        // --- ì´ˆê¸° í™”ë©´: ë©”ì¸(ì—­í•  ì„ íƒ) ---
        navigateTo(SCREENS.MAIN);
      }

      // DOMì´ ì™„ì „íˆ ë¡œë“œëœ í›„ ì•± ì´ˆê¸°í™” ì‹¤í–‰
      document.addEventListener('DOMContentLoaded', initApp);
    </script>
  </body>
</html>
